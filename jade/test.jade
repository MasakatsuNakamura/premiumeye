doctype html
html
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    title 裏サニックスアイ
    link(href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css", rel="stylesheet")
    script(src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js")
    script(src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js")
  body
    div
      input#search(type="text")
      input#search-btn(type="button", value="検索")
    div
      table
        thead
          each name in header
            th=name
        tbody#list
    script(src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js")
    script(src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js")
    script.
      $(document).ready(function () {
        $("#search-btn").on("click", function () {
          $("#list").html("ローディング");
          $.ajax({
            type: "GET",
            url: "https://olggsrrf75.execute-api.ap-northeast-1.amazonaws.com/prod/get_pvsensor_info",
            data: "query=" + $("#search").val(),
            success: function(json) {
              var pvsensors = json.info;
              var header = !{JSON.stringify(header)};
              var resp = "";
              for (var i = 0; i < pvsensors.length; i++) {
                var pvsensor = pvsensors[i];
                resp += "<tr>";
                for (var j = 0; j < header.length; j++) {
                  var desc = pvsensor[header[j]];
                  resp += "<td>" + desc + "</td>";
                }
                resp += "</tr>";
              }
              resp += "</tbody></table>";

              $("#list").html(resp);
            }
          });
        });
      });